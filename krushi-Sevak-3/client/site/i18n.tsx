import { createContext, useContext, useMemo, useState, ReactNode } from "react";

export type Locale = "en" | "mr" | "hi";

const dictionaries = {
  en: {
    brand: "Krushi-Sevak",
    tagline: "Always ready to assist farmers",
    cta_get_started: "Get started",
    nav_home: "Home",
    nav_crops: "Crops",
    nav_schemes: "Schemes",
    nav_weather: "Weather",
    nav_experts: "Experts",
    nav_distributors: "Distributors",
    nav_finance: "Finance",
    nav_admin: "Admin",
    hero_sub: "Localized crop guidance, schemes, weather, and expert help — in English, Marathi, and Hindi.",
    search_placeholder: "Search crop name e.g. Wheat, Sugarcane",
    features_title: "What you can do",
    f1: "Crop guidance by stage",
    f2: "Government schemes updates",
    f3: "Weather-aware tips",
    f4: "Expert and distributor directory",
    schemes_highlight: "Latest schemes",
    crops_title: "Maharashtra Crops",
    crops_intro: "Quick form to record crop details.",
    crops_category: "Category",
    crops_crop: "Crop",
    crops_season: "Season",
    crops_irrigation: "Irrigation",
    crops_area: "Area (acre)",
    crops_sowing: "Sowing date",
    crops_notes: "Notes (optional)",
    save_crop: "Save Crop",
    your_crops: "Your Crops",
    no_crops: "No crops recorded yet.",
    view_plan: "View Plan",
    hide_plan: "Hide Plan",
    add_sowing_hint: "Add a sowing date to generate the calendar plan.",
    plan_window: "Plan window",
    growth_stages: "Growth stages",
    weekly_tasks: "Weekly tasks",
    no_tasks: "No specific tasks scheduled",
    type_activity: "Activity",
    type_fertilizer: "Fertilizer",
    type_pest: "Pest",
    type_irrigation: "Irrigation",
    season_kharif: "Kharif",
    season_rabi: "Rabi",
    season_summer: "Summer",
    season_annual: "Annual",
    irr_rainfed: "Rainfed",
    irr_drip: "Drip",
    irr_sprinkler: "Sprinkler",
    irr_flood: "Flood",
    income_title: "Record Income",
    income_category: "Category",
    income_name: "Income Name (optional)",
    income_amount: "Amount (₹)",
    income_date: "Date",
    income_button: "Add Income",
    incomes: "Incomes",
    finance_title: "Agriculture Finance Tracker",
    total_profit: "Total Profit",
    expenses_label: "Expenses",
    income_label: "Income",
    expense_tab: "Expense",
    income_tab: "Income",
    category_label: "Category",
    tx_name_label: "Transaction Name (optional)",
    amount_label: "Amount (₹)",
    date_label: "Date",
    record_button: "Record Transaction",
    rate_label: "Rate per kg (₹)",
    qty_label: "Quantity (kg)",
    calculated_label: "Calculated",
    select_category: "Select category",
    transactions_title: "Transactions",
    no_transactions: "No transactions recorded yet.",
    expenses_by_category: "Expenses by category",
    total_label: "Total",
    no_income: "No income yet.",
    placeholder_title: "Page coming next",
    placeholder_desc: "Tell us to fill this page with your desired content. Navigation stays consistent across the app.",
    login_title: "Login",
    login_subtitle: "Sign in to your account",
    login_username: "Username",
    login_username_placeholder: "e.g., farmer",
    login_password: "Password",
    login_password_placeholder: "Enter your password",
    login_button: "Login",
    login_loading: "Logging in...",
    login_error: "Invalid username or password",
    login_demo_hint: "Demo Credentials:",
    logout_button: "Logout",
    access_denied: "You need to be logged in to access this section.",
  },
  mr: {
    brand: "कृषी-सेवक",
    tagline: "शेतकऱ्यांच्या सेवेस सदैव तत्पर",
    cta_get_started: "सुरू करा",
    nav_home: "मुखपृष्ठ",
    nav_crops: "पिक मार्गदर्शन",
    nav_schemes: "योजना",
    nav_weather: "हवामान",
    nav_experts: "तज्ञ",
    nav_distributors: "वितरक",
    nav_finance: "आर्थिक नोंद",
    nav_admin: "प्रशासन",
    hero_sub: "स्थानिक भाषेत पीक मार्गदर्शन, योजना, हवामान व तज्ञांची मदत — इंग्रजी, मराठी आणि हिंदीमध्ये.",
    search_placeholder: "पीक शोधा उदा. गहू, ऊस",
    features_title: "आपण काय करू शकता",
    f1: "पीक टप्प्यानुसार मार्गदर्शन",
    f2: "सरकारी योजनांची अद्यतने",
    f3: "हवामानाधारित टिप्स",
    f4: "तज्ञ व वितरक निर्देशिका",
    schemes_highlight: "नवीन योजना",
    crops_title: "महाराष्ट्रातील पिके",
    crops_intro: "पीक तपशील जलद नोंदवा.",
    crops_category: "वर्ग",
    crops_crop: "पीक",
    crops_season: "हंगाम",
    crops_irrigation: "सिंचन",
    crops_area: "क्षेत्रफळ (एकर)",
    crops_sowing: "पेरणीची तारीख",
    crops_notes: "नोंदी (ऐच्छिक)",
    save_crop: "पीक जतन करा",
    your_crops: "आपली पिके",
    no_crops: "अजून कोणतेही पीक नोंदले नाही.",
    view_plan: "योजना पाहा",
    hide_plan: "योजना लपवा",
    add_sowing_hint: "कॅलेंडर योजना तयार करण्यासाठी पेरणीची तारीख जोडा.",
    plan_window: "योजना कालावधी",
    growth_stages: "वाढीचे टप्पे",
    weekly_tasks: "साप्ताहिक कामे",
    no_tasks: "या आठवड्यात कोणतेही विशेष काम नाही",
    type_activity: "क्रिया",
    type_fertilizer: "खत",
    type_pest: "किड/रोग",
    type_irrigation: "सिंचन",
    season_kharif: "खरीप",
    season_rabi: "रब्बी",
    season_summer: "उन्हाळा",
    season_annual: "वार्षिक",
    irr_rainfed: "पावसावर",
    irr_drip: "ठिबक",
    irr_sprinkler: "फवारणी",
    irr_flood: "भराव",
    income_title: "उत्पन्न नोंद",
    income_category: "वर्ग",
    income_name: "उत्पन्नाचे नाव (ऐच्छिक)",
    income_amount: "रक्कम (₹)",
    income_date: "तारीख",
    income_button: "उत्पन्न जोडा",
    incomes: "उत्पन्न नोंदी",
    finance_title: "कृषी अर्थसंकल्प नोंद",
    total_profit: "एकूण नफा",
    expenses_label: "खर्च",
    income_label: "उत्पन्न",
    expense_tab: "खर्च",
    income_tab: "उत्पन्न",
    category_label: "वर्ग",
    tx_name_label: "व्यवहाराचे नाव (ऐच्छिक)",
    amount_label: "रक्कम (₹)",
    date_label: "तारीख",
    record_button: "नों��� करा",
    rate_label: "दर प्रति किलो (₹)",
    qty_label: "प्रमाण (किलो)",
    calculated_label: "हिशोब",
    select_category: "वर्ग निवडा",
    transactions_title: "व्यवहार",
    no_transactions: "अजून कोणतीही नोंद नाही.",
    expenses_by_category: "वर्गानुसार खर्च",
    total_label: "एकूण",
    no_income: "अजून उत्पन्न नाही।",
    placeholder_title: "ही पान लवकरच",
    placeholder_desc: "या पानाचे तपशील सांगितल्यास आम्ही लगेच तयार करू. नेव्हिगेशन समान राहील।",
    login_title: "लॉगिन करा",
    login_subtitle: "आपल्या खात्यात साइन इन करा",
    login_username: "वापरकर्ता नाव",
    login_username_placeholder: "उदा., किसान",
    login_password: "पासवर्ड",
    login_password_placeholder: "आपला पासवर्ड प्रविष्ट करा",
    login_button: "लॉगिन करा",
    login_loading: "लॉगिन होत आहे...",
    login_error: "अयोग्य वापरकर्ता नाव किंवा पासवर्ड",
    login_demo_hint: "डेमो क्रेडेन्शियल्स:",
    logout_button: "लॉगआउट",
    access_denied: "या विभागात प्रवेश करण्यासाठी आपण लॉगिन केले पाहिजे।",
  },
  hi: {
    brand: "कृषि-सेवक",
    tagline: "किसानों की सेवा के लिए सदैव तैयार",
    cta_get_started: "शुरू करें",
    nav_home: "मुख्य पृष्ठ",
    nav_crops: "फसल मार्गदर्शन",
    nav_schemes: "योजनाएँ",
    nav_weather: "मौसम",
    nav_experts: "विशेषज्ञ",
    nav_distributors: "डिस्ट्रिब्यूटर्स",
    nav_finance: "वित्त",
    nav_admin: "एडमिन",
    hero_sub: "स्थानीय भाषा में फसल मार्गदर्शन, योजनाएँ, मौसम और विशेषज्ञ सहायता — हिंदी, मराठी और अंग्रेजी में।",
    search_placeholder: "फसल खोजें जैसे गेहूं, गन्ना",
    features_title: "आप क्या कर सकते हैं",
    f1: "फसल चरण अनुसार मार्गदर्शन",
    f2: "सरकारी योजना अपडेट",
    f3: "मौसम आधारित सुझाव",
    f4: "विशेषज्ञ और डिस्ट्रीब्यूटर डायरेक्टरी",
    schemes_highlight: "नई योजनाएँ",
    crops_title: "महाराष्ट्र फसलें",
    crops_intro: "फसल विवरण जल्दी दर्ज करें।",
    crops_category: "श्रेणी",
    crops_crop: "फसल",
    crops_season: "सीज़न",
    crops_irrigation: "सिंचाई",
    crops_area: "क्षेत्र (एकड़)",
    crops_sowing: "बुवाई की तिथि",
    crops_notes: "नोट्स (वैकल्पिक)",
    save_crop: "फसल सहेजें",
    your_crops: "आपकी फसलें",
    no_crops: "अभी कोई फसल दर्ज नहीं।",
    view_plan: "योजना देखें",
    hide_plan: "योजना ��ुपाएँ",
    add_sowing_hint: "कैलेंडर योजना बनाने के लिए बुवाई की तिथि जोड़ें।",
    plan_window: "योजना अवधि",
    growth_stages: "वृद्धि चरण",
    weekly_tasks: "साप्ताहिक कार्य",
    no_tasks: "इस सप्ताह कोई विशेष कार्य नहीं",
    type_activity: "क्रिया",
    type_fertilizer: "उर्वरक",
    type_pest: "कीट/रोग",
    type_irrigation: "सिंचाई",
    season_kharif: "खरीफ",
    season_rabi: "रबी",
    season_summer: "गर्मी",
    season_annual: "वार्षिक",
    irr_rainfed: "वर्षा आधारित",
    irr_drip: "ड्रिप",
    irr_sprinkler: "स्प्रिंकलर",
    irr_flood: "फ्लड",
    income_title: "आय दर्ज करें",
    income_category: "श्रेणी",
    income_name: "आय का नाम (वैकल्पिक)",
    income_amount: "राशि (₹)",
    income_date: "तारीख",
    income_button: "आय जोड़ें",
    incomes: "आय प्रविष्टियाँ",
    finance_title: "कृषि वित्त ट्रैकर",
    total_profit: "कुल लाभ",
    expenses_label: "खर्च",
    income_label: "आय",
    expense_tab: "खर्च",
    income_tab: "आय",
    category_label: "श्रेणी",
    tx_name_label: "लेनदेन का नाम (वैकल्पिक)",
    amount_label: "राशि (₹)",
    date_label: "तिथि",
    record_button: "लेनदेन दर्ज करें",
    rate_label: "दर प्रति किलोग्राम (₹)",
    qty_label: "मात्रा (किलो)",
    calculated_label: "गणना",
    select_category: "श्रेणी चुनें",
    transactions_title: "लेनदेन",
    no_transactions: "अभी कोई लेनदेन नहीं।",
    expenses_by_category: "श्रेणी अनुसार खर्च",
    total_label: "कुल",
    no_income: "अभी कोई आय नहीं।",
    placeholder_title: "यह पेज जल्द",
    placeholder_desc: "बताइए क्या चाहिए, हम यह पेज भर देंगे। नेविगेशन समान रहेगा।",
    login_title: "लॉगिन करें",
    login_subtitle: "अपने खाते में साइन इन करें",
    login_username: "उपयोगकर्ता नाम",
    login_username_placeholder: "उदा., किसान",
    login_password: "पासवर्ड",
    login_password_placeholder: "अपना पासवर्ड दर्ज करें",
    login_button: "लॉगिन करें",
    login_loading: "लॉगिन जारी है...",
    login_error: "अमान्य उपयोगकर्ता नाम या पासवर्ड",
    login_demo_hint: "डेमो क्रेडेंशियल्स:",
    logout_button: "लॉगआउट",
    access_denied: "इस खंड तक पहुंचने के लिए आपको लॉगिन करना होगा।",
  },
};

export type Dictionary = typeof dictionaries.en;

type I18nContextType = {
  locale: Locale;
  t: Dictionary;
  setLocale: (l: Locale) => void;
};

const I18nContext = createContext<I18nContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [locale, setLocale] = useState<Locale>("en");
  const t = useMemo(() => dictionaries[locale], [locale]);

  return (
    <I18nContext.Provider value={{ locale, t, setLocale }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useI18n must be used within LanguageProvider");
  return ctx;
}
